<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Abella Joias</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

<style>
body{background:#F8F6F2}
.font-serif{font-family:'Cinzel',serif}
.gold{color:#A68966}
#telaCarrinho{transform:translateX(100%);transition:transform .4s ease}
#telaCarrinho.show{transform:translateX(0)}
</style>
</head>
<body>

<header class="bg-white p-8 border-b text-center relative">
  <h1 class="font-serif text-3xl tracking-widest gold">Abella Joias</h1>
  <p class="text-xs tracking-widest text-gray-400 mt-1">CAT√ÅLOGO EXCLUSIVO</p>

  <button id="btnCarrinhoDesktop"
    class="absolute top-5 right-10 hidden lg:inline-block bg-black text-white px-4 py-2 rounded text-xs tracking-widest">
    üõí Carrinho
  </button>
</header>

<main class="max-w-7xl mx-auto p-8">
  <section id="produtos"
    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-8"></section>
</main>

<button id="btnCarrinhoMobile"
  class="fixed bottom-5 right-5 bg-black text-white px-5 py-3 rounded-full text-xs tracking-widest lg:hidden shadow-lg z-50">
  üõí Carrinho
</button>

<div id="telaCarrinho" class="fixed inset-0 bg-black/50 z-50 hidden">
  <div class="bg-white w-full lg:w-96 h-full p-6 overflow-y-auto relative">
    <button id="voltarCompras"
      class="absolute top-4 right-4 bg-gray-200 px-3 py-1 rounded">‚úï</button>

    <h2 class="font-serif text-lg gold mb-4">Carrinho</h2>

    <input id="clienteNomeFull" class="border p-2 w-full mb-3" placeholder="Seu nome">

    <div id="carrinhoFull" class="space-y-4 mb-4"></div>

    <p>Total: <strong>R$ <span id="totalFull">0.00</span></strong></p>

    <button onclick="finalizarPedidoFull()"
      class="w-full bg-black text-white py-3 tracking-widest text-xs mt-4">
      FINALIZAR NO WHATSAPP
    </button>
  </div>
</div>

<script>
firebase.initializeApp({
  apiKey: "SUA_API_KEY_AQUI",
  authDomain: "SEU_PROJETO.firebaseapp.com",
  databaseURL: "https://SEU_PROJETO-default-rtdb.firebaseio.com",
  projectId: "SEU_PROJETO"
});

const db = firebase.database();
const produtosEl = document.getElementById('produtos');
const carrinhoEl = document.getElementById('carrinhoFull');
const totalEl = document.getElementById('totalFull');
const tela = document.getElementById('telaCarrinho');

let produtos={}, carrinho=[];

/* PRODUTOS */
db.ref('products').on('value', snap=>{
  produtosEl.innerHTML='';
  produtos={};
  snap.forEach(s=>{
    const p=s.val(); p.id=s.key; produtos[p.id]=p;
    produtosEl.innerHTML+=`
    <div class="bg-white border p-4 rounded">
      <img src="${p.image}" class="w-full h-48 object-cover rounded">
      <h3 class="mt-2 text-center">${p.name}</h3>
      <p class="text-center gold">R$ ${Number(p.price).toFixed(2)}</p>
      <button onclick="add('${p.id}')"
        class="w-full border py-2 text-xs mt-2">ADICIONAR</button>
    </div>`;
  });
});

function add(id){
  const i=carrinho.find(x=>x.id===id);
  i?i.qtd++:carrinho.push({id,qtd:1});
  render();
}

function render(){
  carrinhoEl.innerHTML='';
  let total=0;
  carrinho.forEach(i=>{
    const p=produtos[i.id];
    total+=p.price*i.qtd;
    carrinhoEl.innerHTML+=`<p>${i.qtd}x ${p.name}</p>`;
  });
  totalEl.textContent=total.toFixed(2);
}

function finalizarPedidoFull(){
  alert('Pedido enviado!');
}

function abrir(){tela.classList.remove('hidden');setTimeout(()=>tela.classList.add('show'),10)}
function fechar(){tela.classList.remove('show');setTimeout(()=>tela.classList.add('hidden'),400)}
btnCarrinhoMobile.onclick=abrir;
btnCarrinhoDesktop.onclick=abrir;
voltarCompras.onclick=fechar;
</script>

</body>
</html>
